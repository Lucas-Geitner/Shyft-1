<div class="row scrolling-list">
  <% @shop_employees.each do |employee| %>
    <div class="card-planning">
      <div class="card-planning-description">
        <div class="card-planning-dates">
          <span>
            <i class="fa fa-user"></i>
            <%= employee.first_name.capitalize + " " + employee.last_name.capitalize %>
          </span>
          <span class="separator">-</span>
          <span>
            <% case employee.memberships.first.role %>
            <% when "hr_manager" then role = "HR Manager" %>
            <% when "line_manager" then role = "Line Manager" %>
            <% when "basic_employee" then role = "Employee" %>
            <% end %>
            <%= role %>
          </span>
        </div>
        <div class="skill-buttons">
          <% Poste.joins(:abilities).where(abilities: {user: employee}).each do |poste| %>
            <div class="skill-button">
              <%= poste.name %>
            </div>
          <% end %>
        </div>
      </div>
      <div class="card-planning-controls">
        <div class="planning-owner">
          Insert some <strong>really</strong> cool information here!
        </div>
        <div class="list-controls">
          <%= link_to "Profile", user_path(employee), class: "btn btn-default" %>
          <%= link_to "Modifier", user_path(employee), class: "btn btn-default" %>
          <%= link_to user_path(employee), class: "btn btn-default" do %>
            <i class="fa fa-print"></i>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>


<div class="fixed-form">
  <h2>Add an employee</h1>
  <%= render 'users/form', user: @user, membership: @membership, ability: @ability %>
</div>

<div class="panel panel-default">
  <!-- Default panel contents -->
  <div class="panel-heading">My employees</div>

  <!-- Table -->
  <table class="table" id="employees">
    <th>
      <td>First Name</td>
      <td>Last Name</td>
      <td>Role</td>
      <td>Possible jobs</td>
    </th>
    <% @shop_employees.each_with_index do |employee, i| %>
      <tr id="employees-list">
        <td><%= i + 1 %></td>
        <td><%= employee.first_name %></td>
        <td><%= employee.last_name %></td>
        <!-- TEMPORARY!!! CHANGE TO CURRENT SHOP -->
        <td><%= employee.memberships.first.role %></td>
        <td>
          <% Poste.joins(:abilities).where(abilities: {user: employee}).each do |poste| %>
            <%= poste.name %>
          <% end %>
        </td>
        <td><%= link_to "View profile", user_path(employee) %></td>
      </tr>
    <% end %>
  </table>
</div>
